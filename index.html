<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏≠ËææÂõΩÈÄöÁîµÊ¢ØÊõ¥Êñ∞</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõó</text></svg>">
    <!-- LeanCloud SDKÔºàÂõΩÂÜÖ‰∫ëÊúçÂä°Ôºâ -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.15.2/dist/av-min.js"></script>
</head>
<body>
    <!-- ËÉåÊôØË£ÖÈ•∞ -->
    <div class="background-decoration">
        <div class="elevator-shaft shaft-1">
            <div class="elevator-car"></div>
        </div>
        <div class="elevator-shaft shaft-2">
            <div class="elevator-car"></div>
        </div>
        <div class="elevator-shaft shaft-3">
            <div class="elevator-car"></div>
        </div>
        <div class="building-silhouette"></div>
    </div>

    <div id="app">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <header class="header">
            <div class="header-left">
                <div class="logo-container">
                    <svg class="logo-icon" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="4" y="2" width="32" height="36" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                        <rect x="8" y="6" width="10" height="14" rx="1" stroke="currentColor" stroke-width="1.5" fill="rgba(255,255,255,0.2)"/>
                        <rect x="22" y="6" width="10" height="14" rx="1" stroke="currentColor" stroke-width="1.5" fill="rgba(255,255,255,0.2)"/>
                        <line x1="20" y1="6" x2="20" y2="20" stroke="currentColor" stroke-width="1"/>
                        <circle cx="20" cy="26" r="2" fill="currentColor"/>
                        <path d="M14 30 L20 34 L26 30" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    </svg>
                </div>
                <div class="header-title">
                    <h1>‰∏≠ËææÂõΩÈÄöÁîµÊ¢ØÊõ¥Êñ∞</h1>
                    <span class="header-subtitle">‰ΩèÂÆÖÁîµÊ¢ØÊõ¥Êñ∞ÊîπÈÄ†ÁÆ°ÁêÜÁ≥ªÁªü</span>
                </div>
            </div>
            <div class="header-right">
                <div class="connection-status" id="connectionStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">ËøûÊé•‰∏≠...</span>
                </div>
                <span class="date-display" id="currentDate"></span>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <main class="main-content">
            <!-- ‰æßËæπÊ†è - È°πÁõÆÂàóË°® -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h2>üìã È°πÁõÆÂàóË°®</h2>
                    <button class="btn-add" id="btnAddProject" title="Êñ∞Âª∫È°πÁõÆ">
                        <span>+</span>
                    </button>
                </div>
                <div class="project-search">
                    <input type="text" id="searchProject" placeholder="üîç ÊêúÁ¥¢È°πÁõÆ...">
                </div>
                <div class="project-list" id="projectList">
                    <!-- È°πÁõÆÂàóË°®Â∞ÜÂä®ÊÄÅÁîüÊàê -->
                </div>
            </aside>

            <!-- ‰∏ªÂ∑•‰ΩúÂå∫ -->
            <section class="workspace" id="workspace">
                <!-- Ê¨¢ËøéÈ°µÈù¢ -->
                <div class="welcome-page" id="welcomePage">
                    <div class="welcome-content">
                        <div class="welcome-icon-container">
                            <svg class="welcome-elevator-icon" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="10" y="5" width="100" height="110" rx="4" stroke="currentColor" stroke-width="3" fill="rgba(26,115,232,0.1)"/>
                                <rect x="20" y="15" width="35" height="50" rx="2" stroke="currentColor" stroke-width="2" fill="rgba(255,255,255,0.5)"/>
                                <rect x="65" y="15" width="35" height="50" rx="2" stroke="currentColor" stroke-width="2" fill="rgba(255,255,255,0.5)"/>
                                <line x1="60" y1="15" x2="60" y2="65" stroke="currentColor" stroke-width="2"/>
                                <circle cx="60" cy="80" r="6" fill="currentColor"/>
                                <path d="M40 95 L60 105 L80 95" stroke="currentColor" stroke-width="3" fill="none" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <h2>Ê¨¢Ëøé‰ΩøÁî®‰∏≠ËææÂõΩÈÄöÁîµÊ¢ØÊõ¥Êñ∞ÁÆ°ÁêÜÁ≥ªÁªü</h2>
                        <p class="welcome-desc">‰∏ì‰∏öÁöÑ‰ΩèÂÆÖËÄÅÊóßÁîµÊ¢ØÊõ¥Êñ∞ÊîπÈÄ†È°πÁõÆÁÆ°ÁêÜÂπ≥Âè∞</p>
                        <div class="welcome-features">
                            <div class="feature-item">
                                <span class="feature-icon">üìä</span>
                                <span>ÊµÅÁ®ãÂèØËßÜÂåñ</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">üì∑</span>
                                <span>ÁÖßÁâá‰∫ëÂ≠òÂÇ®</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">üì±</span>
                                <span>Â§öÁ´ØÂêåÊ≠•</span>
                            </div>
                        </div>
                        <button class="btn-primary btn-large" id="btnCreateFirst">
                            <span>+</span> ÂàõÂª∫Êñ∞È°πÁõÆ
                        </button>
                    </div>
                </div>

                <!-- È°πÁõÆËØ¶ÊÉÖÈ°µÈù¢ -->
                <div class="project-detail" id="projectDetail" style="display: none;">
                    <div class="project-header">
                        <div class="project-info">
                            <div class="project-title-row">
                                <h2 id="projectTitle"></h2>
                                <span class="project-badge" id="projectBadge">ËøõË°å‰∏≠</span>
                            </div>
                            <div class="project-meta">
                                <span class="project-date" id="projectDate"></span>
                                <span class="project-address" id="projectAddress"></span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="btn-icon" id="btnEditProject" title="ÁºñËæëÈ°πÁõÆ">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                </svg>
                            </button>
                            <button class="btn-icon btn-danger" id="btnDeleteProject" title="Âà†Èô§È°πÁõÆ">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- ËøõÂ∫¶Ê¶ÇËßà -->
                    <div class="progress-overview">
                        <div class="progress-bar-large">
                            <div class="progress-fill-large" id="progressFill"></div>
                        </div>
                        <div class="progress-stats">
                            <span id="progressText">0/8 Ê≠•È™§ÂÆåÊàê</span>
                            <span id="progressPercent">0%</span>
                        </div>
                    </div>

                    <!-- ÊµÅÁ®ãÊ≠•È™§ -->
                    <div class="steps-container" id="stepsContainer">
                        <!-- Ê≠•È™§Â∞ÜÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Êñ∞Âª∫/ÁºñËæëÈ°πÁõÆÊ®°ÊÄÅÊ°Ü -->
    <div class="modal" id="projectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Êñ∞Âª∫È°πÁõÆ</h3>
                <button class="modal-close" id="closeProjectModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="projectName">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                        È°πÁõÆÂêçÁß∞ <span class="required">*</span>
                    </label>
                    <input type="text" id="projectName" placeholder="ËØ∑ËæìÂÖ•È°πÁõÆÂêçÁß∞ÔºåÂ¶ÇÔºöXXÂ∞èÂå∫1Âè∑Ê•ºÁîµÊ¢ØÊõ¥Êñ∞">
                </div>
                <div class="form-group">
                    <label for="projectAddress">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        È°πÁõÆÂú∞ÂùÄ
                    </label>
                    <input type="text" id="projectAddress" placeholder="ËØ∑ËæìÂÖ•È°πÁõÆÂú∞ÂùÄ">
                </div>
                <div class="form-group">
                    <label for="projectType">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <line x1="9" y1="3" x2="9" y2="21"/>
                        </svg>
                        Êõ¥Êñ∞Á±ªÂûã
                    </label>
                    <select id="projectType">
                        <option value="update">Êõ¥Êñ∞ÔºàË°•Ë¥¥15‰∏áÂÖÉ/Âè∞Ôºâ</option>
                        <option value="reform">ÊîπÈÄ†ÔºàË°•Ë¥¥5‰∏áÂÖÉ/Âè∞Ôºâ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="elevatorCount">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <line x1="12" y1="1" x2="12" y2="23"/>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                        ÁîµÊ¢ØÊï∞Èáè
                    </label>
                    <input type="number" id="elevatorCount" placeholder="ËØ∑ËæìÂÖ•ÁîµÊ¢ØÊï∞Èáè" min="1" value="1">
                </div>
                <div class="form-group">
                    <label for="projectNote">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                            <line x1="17" y1="10" x2="3" y2="10"/>
                            <line x1="21" y1="6" x2="3" y2="6"/>
                            <line x1="21" y1="14" x2="3" y2="14"/>
                            <line x1="17" y1="18" x2="3" y2="18"/>
                        </svg>
                        Â§áÊ≥®ËØ¥Êòé
                    </label>
                    <textarea id="projectNote" rows="3" placeholder="ËØ∑ËæìÂÖ•Â§áÊ≥®ËØ¥Êòé"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelProjectModal">ÂèñÊ∂à</button>
                <button class="btn-primary" id="saveProject">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                        <polyline points="17 21 17 13 7 13 7 21"/>
                        <polyline points="7 3 7 8 15 8"/>
                    </svg>
                    ‰øùÂ≠ò
                </button>
            </div>
        </div>
    </div>

    <!-- ÁÖßÁâáÊü•ÁúãÊ®°ÊÄÅÊ°Ü -->
    <div class="modal" id="photoModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="photoModalTitle">Êü•ÁúãÁÖßÁâá</h3>
                <button class="modal-close" id="closePhotoModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="photo-gallery" id="photoGallery">
                    <!-- ÁÖßÁâáÂ∞ÜÂä®ÊÄÅÁîüÊàê -->
                </div>
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="photoInput" multiple accept="image/*" style="display: none;">
                    <div class="upload-placeholder" id="uploadPlaceholder">
                        <div class="upload-icon-container">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21 15 16 10 5 21"/>
                            </svg>
                        </div>
                        <p class="upload-text">ÁÇπÂáªÊàñÊãñÊãΩÁÖßÁâáÂà∞Ê≠§Â§Ñ‰∏ä‰º†</p>
                        <p class="upload-hint">ÊîØÊåÅ JPG„ÄÅPNG„ÄÅGIF Ê†ºÂºèÔºåÂçïÂº†ÊúÄÂ§ß 10MB</p>
                    </div>
                </div>
                <div class="upload-progress" id="uploadProgress" style="display: none;">
                    <div class="upload-progress-bar">
                        <div class="upload-progress-fill" id="uploadProgressFill"></div>
                    </div>
                    <span class="upload-progress-text" id="uploadProgressText">‰∏ä‰º†‰∏≠...</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelPhotoModal">ÂÖ≥Èó≠</button>
                <button class="btn-primary" id="btnUploadPhoto">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    ‰∏ä‰º†ÁÖßÁâá
                </button>
            </div>
        </div>
    </div>

    <!-- ÁÖßÁâáÈ¢ÑËßàÊ®°ÊÄÅÊ°Ü -->
    <div class="modal" id="previewModal">
        <div class="modal-content modal-preview">
            <button class="modal-close preview-close" id="closePreviewModal">&times;</button>
            <div class="preview-container">
                <button class="preview-nav prev" id="prevPhoto">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"/>
                    </svg>
                </button>
                <img id="previewImage" src="" alt="È¢ÑËßàÂõæÁâá">
                <button class="preview-nav next" id="nextPhoto">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="9 18 15 12 9 6"/>
                    </svg>
                </button>
            </div>
            <div class="preview-info">
                <span id="previewInfo"></span>
                <button class="btn-danger btn-sm" id="deletePhoto">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                    Âà†Èô§Ê≠§ÁÖßÁâá
                </button>
            </div>
        </div>
    </div>

    <!-- Á°ÆËÆ§ÂØπËØùÊ°Ü -->
    <div class="modal" id="confirmModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Á°ÆËÆ§Êìç‰Ωú</h3>
            </div>
            <div class="modal-body">
                <div class="confirm-icon">‚ö†Ô∏è</div>
                <p id="confirmMessage">Á°ÆÂÆöË¶ÅÊâßË°åÊ≠§Êìç‰ΩúÂêóÔºü</p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelConfirm">ÂèñÊ∂à</button>
                <button class="btn-danger" id="confirmAction">Á°ÆÂÆöÂà†Èô§</button>
            </div>
        </div>
    </div>

    <!-- Âä†ËΩΩÊåáÁ§∫Âô® -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Âä†ËΩΩ‰∏≠...</p>
        </div>
    </div>

    <!-- Toast ÊèêÁ§∫ -->
    <div class="toast" id="toast"></div>

    <script src="leancloud-config.js"></script>
    <script src="app.js"></script>
</body>
</html>
